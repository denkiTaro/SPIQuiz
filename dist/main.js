/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();const e=new class{constructor(){}warehouse={};updateContext(t,e=null){if("string"!=typeof t)throw"Context.updateContextの引数が設定されていません";this.warehouse[t]=e}},n=e.warehouse,i={getDOMbyID:t=>document.getElementById(t),setNextPageInPath(t,e="click"){if(t instanceof HTMLElement==0)throw"setNextPageの引数が設定されていません";t.addEventListener(e,(()=>{n.mainPage.loadNextPageWithPath()}))},startPage(){const t=i.getDOMbyID("startPage").getElementsByTagName("button")[0];i.setNextPageInPath(t)},setPage(){const t=i.getDOMbyID("setStartButton"),n=document.SSelects.SValue.value;t.addEventListener("click",(function(){e.updateContext("numOfQuestions",n)})),i.setNextPageInPath(t)},solvePage(){const t=document.choicesContainer,r=i.getDOMbyID("solvePage"),s=document.createElement("button");function o(t,e="-"){const i=n.ansPartText;i.textContent=e,t.appendChild(i)}s.textContent="結果を見る",e.updateContext("ansArr",[]),i.setNextPageInPath(s);const a=["A","B","C","D"];for(const i in a)t[a[i]].addEventListener("click",(function(i){const a=1*n.numOfQuestions;e.updateContext("numOfQuestions",a-1),o(r),(a<=1||!a)&&(t.style.display="none",r.appendChild(s));const h=n.ansArr,c=i.target.name;h.push(c),e.updateContext("ansArr",h)}))},resultPage(){const t=i.getDOMbyID("resultPage").getElementsByTagName("button")[0];i.setNextPageInPath(t)}};Object.freeze(i);const r=i;class s{constructor(t,e){if(!(Array.isArray(t)&&e instanceof HTMLElement))throw"Pageの引数が設定されていません";this._i=0,this._pageNameArray=t,this._parentDOM=e}loadNextPageWithPath(t=0){const e=this._i+t;this._i=e,e>=this._pageNameArray.length&&(this._i=0);const n=this._pageNameArray[this._i],i=`/src/view/page/${n}/${n}.html`;new class{constructor(t,e){if(e instanceof HTMLElement==0)throw"Reduxの引数が設定されていません";this._pageName=t,this._parentDOM=e}reduxPageByPath(t){return fetch(t).then((t=>t.text())).then((t=>{const e=(new DOMParser).parseFromString(t,"text/html").firstElementChild;e.id=`${this._pageName}Page`,this._parentDOM.insertAdjacentElement("afterbegin",e)}))}}(n,this._parentDOM).reduxPageByPath(i).then((()=>{this._parentDOM.getElementsByTagName("html")[1]&&this._parentDOM.getElementsByTagName("html")[1].remove()})).then((()=>{const t=r[`${n}Page`];t&&t(),this._i=this._i+1}))}reset(t){if(a instanceof s==0)throw"PageLogic.resetの引数が設定されていません";this._i=0,this[t]()}}const o=s,h=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const r=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,h=a?t[e+2]:0,c=r>>2,l=(3&r)<<4|o>>4;let u=(15&o)<<2|h>>6,d=63&h;a||(d=64,s||(u=64)),i.push(n[c],n[l],n[u],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(h(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const r=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0;++e;const o=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==r||null==s||null==o||null==a)throw Error();const h=r<<2|s>>4;if(i.push(h),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},l=function(t){return function(t){const e=h(t);return c.encodeByteArray(e,!0)}(t).replace(/\./g,"")};class u{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function f(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof indexedDB}function g(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}class m extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,m.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,v.prototype.create)}}class v{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(y,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new m(i,o,n)}}const y=/\{\$([^}]+)}/g;function w(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(b(n)&&b(s)){if(!w(n,s))return!1}else if(n!==s)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function b(t){return null!==t&&"object"==typeof t}function I(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function _(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}})),e}function T(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class E{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!=typeof t||null===t)return!1;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=S),void 0===i.error&&(i.error=S),void 0===i.complete&&(i.complete=S);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}})),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function S(){}function k(t,e=1e3,n=2){const i=e*Math.pow(n,t),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)}function C(t){return t&&t._delegate?t._delegate:t}class A{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const O="[DEFAULT]";class R{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new u;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:O})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t="[DEFAULT]"){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t="[DEFAULT]"){return this.instances.has(t)}getOptions(t="[DEFAULT]"){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(i);return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===O?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t="[DEFAULT]"){return this.component?this.component.multipleInstances?t:O:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class N{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new R(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const P=[];var D,L;(L=D||(D={}))[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT";const M={debug:D.DEBUG,verbose:D.VERBOSE,info:D.INFO,warn:D.WARN,error:D.ERROR,silent:D.SILENT},x=D.INFO,U={[D.DEBUG]:"log",[D.VERBOSE]:"log",[D.INFO]:"info",[D.WARN]:"warn",[D.ERROR]:"error"},F=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=U[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class j{constructor(t){this.name=t,this._logLevel=x,this._logHandler=F,this._userLogHandler=null,P.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in D))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?M[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,D.DEBUG,...t),this._logHandler(this,D.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,D.VERBOSE,...t),this._logHandler(this,D.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,D.INFO,...t),this._logHandler(this,D.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,D.WARN,...t),this._logHandler(this,D.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,D.ERROR,...t),this._logHandler(this,D.ERROR,...t)}}let B,H;const V=new WeakMap,z=new WeakMap,$=new WeakMap,q=new WeakMap,K=new WeakMap;let G={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return z.get(t);if("objectStoreNames"===e)return t.objectStoreNames||$.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return J(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function W(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(H||(H=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(X(this),t),J(V.get(this))}:function(...t){return J(e.apply(X(this),t))}:function(t,...n){const i=e.call(X(this),t,...n);return $.set(i,t.sort?t.sort():[t]),J(i)}:(t instanceof IDBTransaction&&function(t){if(z.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));z.set(t,e)}(t),n=t,(B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>n instanceof t))?new Proxy(t,G):t);var e,n}function J(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(J(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&V.set(e,t)})).catch((()=>{})),K.set(e,t),e}(t);if(q.has(t))return q.get(t);const e=W(t);return e!==t&&(q.set(t,e),K.set(e,t)),e}const X=t=>K.get(t);function Y(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=J(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(J(o.result),t.oldVersion,t.newVersion,J(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),a}const Q=["get","getKey","getAll","getAllKeys","count"],Z=["put","add","delete","clear"],tt=new Map;function et(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(tt.get(e))return tt.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=Z.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Q.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return tt.set(e,s),s}var nt;nt=G,G={...nt,get:(t,e,n)=>et(t,e)||nt.get(t,e,n),has:(t,e)=>!!et(t,e)||nt.has(t,e)};class it{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const rt="@firebase/app",st="0.7.28",ot=new j("@firebase/app"),at={[rt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ht=new Map,ct=new Map;function lt(t,e){try{t.container.addComponent(e)}catch(n){ot.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ut(t){const e=t.name;if(ct.has(e))return ot.debug(`There were multiple attempts to register component ${e}.`),!1;ct.set(e,t);for(const e of ht.values())lt(e,t);return!0}function dt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const ft=new v("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class pt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new A("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ft.create("app-deleted",{appName:this._name})}}function gt(t,e,n){var i;let r=null!==(i=at[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void ot.warn(t.join(" "))}ut(new A(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}const mt="firebase-heartbeat-store";let vt=null;function yt(){return vt||(vt=Y("firebase-heartbeat-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(mt)}}).catch((t=>{throw ft.create("storage-open",{originalErrorMessage:t.message})}))),vt}async function wt(t,e){var n;try{const n=(await yt()).transaction(mt,"readwrite"),i=n.objectStore(mt);return await i.put(e,bt(t)),n.done}catch(t){throw ft.create("storage-set",{originalErrorMessage:null===(n=t)||void 0===n?void 0:n.message})}}function bt(t){return`${t.name}!${t.options.appId}`}class It{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Tt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=_t();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=_t(),{heartbeatsToSend:e,unsentEntries:n}=function(t,e=1024){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),Et(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Et(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=l(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function _t(){return(new Date).toISOString().substring(0,10)}class Tt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!p()&&g().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){var e;try{return(await yt()).transaction(mt).objectStore(mt).get(bt(t))}catch(t){throw ft.create("storage-get",{originalErrorMessage:null===(e=t)||void 0===e?void 0:e.message})}}(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return wt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return wt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Et(t){return l(JSON.stringify({version:2,heartbeats:t})).length}ut(new A("platform-logger",(t=>new it(t)),"PRIVATE")),ut(new A("heartbeat",(t=>new It(t)),"PRIVATE")),gt(rt,st,""),gt(rt,st,"esm2017"),gt("fire-js",""),gt("firebase","9.9.0","app");const St="@firebase/installations",kt="0.5.12",Ct="w:0.5.12",At=new v("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ot(t){return t instanceof m&&t.code.includes("request-failed")}function Rt({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Nt(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function Pt(t,e){const n=(await e.json()).error;return At.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Dt({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}async function Lt(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Mt(t){return new Promise((e=>{setTimeout(e,t)}))}const xt=/^[cdef][\w-]{21}$/;function Ut(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){return(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return xt.test(e)?e:""}catch(t){return""}}function Ft(t){return`${t.appName}!${t.appId}`}const jt=new Map;function Bt(t,e){const n=Ft(t);Ht(n,e),function(t,e){const n=(!Vt&&"BroadcastChannel"in self&&(Vt=new BroadcastChannel("[Firebase] FID Change"),Vt.onmessage=t=>{Ht(t.data.key,t.data.fid)}),Vt);n&&n.postMessage({key:t,fid:e}),0===jt.size&&Vt&&(Vt.close(),Vt=null)}(n,e)}function Ht(t,e){const n=jt.get(t);if(n)for(const t of n)t(e)}let Vt=null;const zt="firebase-installations-store";let $t=null;function qt(){return $t||($t=Y("firebase-installations-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(zt)}})),$t}async function Kt(t,e){const n=Ft(t),i=(await qt()).transaction(zt,"readwrite"),r=i.objectStore(zt),s=await r.get(n);return await r.put(e,n),await i.done,s&&s.fid===e.fid||Bt(t,e.fid),e}async function Gt(t){const e=Ft(t),n=(await qt()).transaction(zt,"readwrite");await n.objectStore(zt).delete(e),await n.done}async function Wt(t,e){const n=Ft(t),i=(await qt()).transaction(zt,"readwrite"),r=i.objectStore(zt),s=await r.get(n),o=e(s);return void 0===o?await r.delete(n):await r.put(o,n),await i.done,!o||s&&s.fid===o.fid||Bt(t,o.fid),o}async function Jt(t){let e;const n=await Wt(t.appConfig,(n=>{const i=function(t){return Qt(t||{fid:Ut(),registrationStatus:0})}(n),r=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(At.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(t,e){try{const n=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=Rt(t),r=Dt(t),s=e.getImmediate({optional:!0});if(s){const t=await s.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const o={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:Ct},a={method:"POST",headers:r,body:JSON.stringify(o)},h=await Lt((()=>fetch(i,a)));if(h.ok){const t=await h.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:Nt(t.authToken)}}throw await Pt("Create Installation",h)}(t,e);return Kt(t.appConfig,n)}catch(n){throw Ot(n)&&409===n.customData.serverCode?await Gt(t.appConfig):await Kt(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}(t,n);return{installationEntry:n,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Xt(t)}:{installationEntry:e}}(t,i);return e=r.registrationPromise,r.installationEntry}));return""===n.fid?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function Xt(t){let e=await Yt(t.appConfig);for(;1===e.registrationStatus;)await Mt(100),e=await Yt(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await Jt(t);return n||e}return e}function Yt(t){return Wt(t,(t=>{if(!t)throw At.create("installation-not-found");return Qt(t)}))}function Qt(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function Zt({appConfig:t,heartbeatServiceProvider:e},n){const i=function(t,{fid:e}){return`${Rt(t)}/${e}/authTokens:generate`}(t,n),r=function(t,{refreshToken:e}){const n=Dt(t);return n.append("Authorization",function(t){return`FIS_v2 ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});if(s){const t=await s.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const o={installation:{sdkVersion:Ct,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},h=await Lt((()=>fetch(i,a)));if(h.ok)return Nt(await h.json());throw await Pt("Generate Auth Token",h)}async function te(t,e=!1){let n;const i=await Wt(t.appConfig,(i=>{if(!ne(i))throw At.create("not-registered");const r=i.authToken;if(!e&&(2===(s=r).requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(s)))return i;var s;if(1===r.requestStatus)return n=async function(t,e){let n=await ee(t.appConfig);for(;1===n.authToken.requestStatus;)await Mt(100),n=await ee(t.appConfig);const i=n.authToken;return 0===i.requestStatus?te(t,e):i}(t,e),i;{if(!navigator.onLine)throw At.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(i);return n=async function(t,e){try{const n=await Zt(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Kt(t.appConfig,i),n}catch(n){if(!Ot(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Kt(t.appConfig,n)}else await Gt(t.appConfig);throw n}}(t,e),e}}));return n?await n:i.authToken}function ee(t){return Wt(t,(t=>{if(!ne(t))throw At.create("not-registered");return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var e}))}function ne(t){return void 0!==t&&2===t.registrationStatus}function ie(t){return At.create("missing-app-config-values",{valueName:t})}const re="installations";ut(new A(re,(t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw ie("App Configuration");if(!t.name)throw ie("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw ie(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:dt(e,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),ut(new A("installations-internal",(t=>{const e=dt(t.getProvider("app").getImmediate(),re).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:i}=await Jt(e);return i?i.catch(console.error):te(e).catch(console.error),n.fid}(e),getToken:t=>async function(t,e=!1){const n=t;return await async function(t){const{registrationPromise:e}=await Jt(t);e&&await e}(n),(await te(n,e)).token}(e,t)}}),"PRIVATE")),gt(St,kt),gt(St,kt,"esm2017");const se="analytics",oe="https://www.googletagmanager.com/gtag/js",ae=new j("@firebase/analytics");function he(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}const ce=new v("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),le=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function ue(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function de(t,e=le,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw ce.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw ce.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new pe;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),fe({appId:i,apiKey:r,measurementId:s},o,a,e)}async function fe(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=le){var s,o;const{appId:a,measurementId:h}=t;try{await function(t,e){return new Promise(((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener((()=>{clearTimeout(s),i(ce.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(i,e)}catch(t){if(h)return ae.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${null===(s=t)||void 0===s?void 0:s.message}]`),{appId:a,measurementId:h};throw t}try{const e=await async function(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:ue(i)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,r);if(200!==o.status&&304!==o.status){let t="";try{const n=await o.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(t){}throw ce.create("config-fetch-failed",{httpStatus:o.status,responseMessage:t})}return o.json()}(t);return r.deleteThrottleMetadata(a),e}catch(e){const s=e;if(!function(t){if(!(t instanceof m&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s)){if(r.deleteThrottleMetadata(a),h)return ae.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${null==s?void 0:s.message}]`),{appId:a,measurementId:h};throw e}const c=503===Number(null===(o=null==s?void 0:s.customData)||void 0===o?void 0:o.httpStatus)?k(n,r.intervalMillis,30):k(n,r.intervalMillis),l={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return r.setThrottleMetadata(a,l),ae.debug(`Calling attemptFetch again in ${c} millis`),fe(t,l,i,r)}}class pe{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}let ge,me;async function ve(t,e,n,i,r,s,o){var a;const h=de(t);h.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&ae.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>ae.error(t))),e.push(h);const c=async function(){var t;if(!p())return ae.warn(ce.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await g()}catch(e){return ae.warn(ce.create("indexeddb-unavailable",{errorInfo:null===(t=e)||void 0===t?void 0:t.toString()}).message),!1}return!0}().then((t=>t?i.getId():void 0)),[l,u]=await Promise.all([h,c]);(function(){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(oe))return e;return null})()||function(t,e){const n=document.createElement("script");n.src=`${oe}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}(s,l.measurementId),me&&(r("consent","default",me),me=void 0),r("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=u&&(d.firebase_id=u),r("config",l.measurementId,d),ge&&(r("set",ge),ge=void 0),l.measurementId}class ye{constructor(t){this.app=t}_delete(){return delete we[this.app.options.appId],Promise.resolve()}}let we={},be=[];const Ie={};let _e,Te,Ee="dataLayer",Se=!1;function ke(t,e,n){!function(){const t=[];if(f()&&t.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),n=ce.create("invalid-analytics-context",{errorInfo:e});ae.warn(n.message)}}();const i=t.options.appId;if(!i)throw ce.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw ce.create("no-api-key");ae.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=we[i])throw ce.create("already-exists",{id:i});if(!Se){!function(t){let e=[];Array.isArray(window.dataLayer)?e=window.dataLayer:window.dataLayer=e}();const{wrappedGtag:t,gtagCore:e}=function(t,e,n,i,r){let s=function(...t){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(s=window.gtag),window.gtag=function(t,e,n,i){return async function(r,s,o){try{"event"===r?await async function(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let t=r.send_to;Array.isArray(t)||(t=[t]);const i=await he(n);for(const n of t){const t=i.find((t=>t.measurementId===n)),r=t&&e[t.appId];if(!r){s=[];break}s.push(r)}}0===s.length&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(t){ae.error(t)}}(t,e,n,s,o):"config"===r?await async function(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const t=(await he(n)).find((t=>t.measurementId===r));t&&await e[t.appId]}}catch(t){ae.error(t)}t("config",r,s)}(t,e,n,i,s,o):"consent"===r?t("consent","update",o):t("set",s)}catch(t){ae.error(t)}}}(s,t,e,n),{gtagCore:s,wrappedGtag:window.gtag}}(we,be,Ie);Te=t,_e=e,Se=!0}return we[i]=ve(t,be,Ie,e,_e,Ee,n),new ye(t)}const Ce="@firebase/analytics",Ae="0.8.0";ut(new A(se,((t,{options:e})=>ke(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),ut(new A("analytics-internal",(function(t){try{const e=t.getProvider(se).getImmediate();return{logEvent:(t,n,i)=>function(t,e,n,i){t=C(t),async function(t,e,n,i,r){if(r&&r.global)t("event",n,i);else{const r=await e;t("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(Te,we[t.app.options.appId],e,n,i).catch((t=>ae.error(t)))}(e,t,n,i)}}catch(t){throw ce.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),gt(Ce,Ae),gt(Ce,Ae,"esm2017"),function(t=function(t="[DEFAULT]"){const e=ht.get(t);if(!e)throw ft.create("no-app",{appName:t});return e}()){const e=dt(t=C(t),se);e.isInitialized()?e.getImmediate():function(t,e={}){const n=dt(t,se);if(n.isInitialized()){const t=n.getImmediate();if(w(e,n.getOptions()))return t;throw ce.create("already-initialized")}n.initialize({options:e})}(t)}(function(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},e),i=n.name;if("string"!=typeof i||!i)throw ft.create("bad-app-name",{appName:String(i)});const r=ht.get(i);if(r){if(w(t,r.options)&&w(n,r.config))return r;throw ft.create("duplicate-app",{appName:i})}const s=new N(i);for(const t of ct.values())s.addComponent(t);const o=new pt(t,n,s);return ht.set(i,o),o}({apiKey:"AIzaSyDXCr9AnV0BXqxQzDjHodig9fpkI18tW5I",authDomain:"spiquiz.firebaseapp.com",projectId:"spiquiz",storageBucket:"spiquiz.appspot.com",messagingSenderId:"527551859476",appId:"1:527551859476:web:a355f02767177592aa1001",measurementId:"G-E8KRQ7JRCK"}));var Oe,Re="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t.g?t.g:"undefined"!=typeof self?self:{},Ne={},Pe=Pe||{},De=Re||self;function Le(){}function Me(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function xe(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ue="closure_uid_"+(1e9*Math.random()>>>0),Fe=0;function je(t,e,n){return t.call.apply(t.bind,arguments)}function Be(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function He(t,e,n){return(He=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?je:Be).apply(null,arguments)}function Ve(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ze(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function $e(){this.s=this.s,this.o=this.o}var qe={};$e.prototype.s=!1,$e.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Ue)&&t[Ue]||(t[Ue]=++Fe)}(this);delete qe[t]}},$e.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ke=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ge=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const i=t.length,r="string"==typeof t?t.split(""):t;for(let s=0;s<i;s++)s in r&&e.call(n,r[s],s,t)};function We(t){return Array.prototype.concat.apply([],arguments)}function Je(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function Xe(t){return/^[\s\xa0]*$/.test(t)}var Ye,Qe=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ze(t,e){return-1!=t.indexOf(e)}function tn(t,e){return t<e?-1:t>e?1:0}t:{var en=De.navigator;if(en){var nn=en.userAgent;if(nn){Ye=nn;break t}}Ye=""}function rn(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function sn(t){const e={};for(const n in t)e[n]=t[n];return e}var on="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function an(t,e){let n,i;for(let e=1;e<arguments.length;e++){for(n in i=arguments[e],i)t[n]=i[n];for(let e=0;e<on.length;e++)n=on[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function hn(t){return hn[" "](t),t}hn[" "]=Le;var cn,ln=Ze(Ye,"Opera"),un=Ze(Ye,"Trident")||Ze(Ye,"MSIE"),dn=Ze(Ye,"Edge"),fn=dn||un,pn=Ze(Ye,"Gecko")&&!(Ze(Ye.toLowerCase(),"webkit")&&!Ze(Ye,"Edge"))&&!(Ze(Ye,"Trident")||Ze(Ye,"MSIE"))&&!Ze(Ye,"Edge"),gn=Ze(Ye.toLowerCase(),"webkit")&&!Ze(Ye,"Edge");function mn(){var t=De.document;return t?t.documentMode:void 0}t:{var vn="",yn=function(){var t=Ye;return pn?/rv:([^\);]+)(\)|;)/.exec(t):dn?/Edge\/([\d\.]+)/.exec(t):un?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):gn?/WebKit\/(\S+)/.exec(t):ln?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(yn&&(vn=yn?yn[1]:""),un){var wn=mn();if(null!=wn&&wn>parseFloat(vn)){cn=String(wn);break t}}cn=vn}var bn,In={};function _n(){return t=In,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let t=0;const e=Qe(String(cn)).split("."),n=Qe("9").split("."),i=Math.max(e.length,n.length);for(let o=0;0==t&&o<i;o++){var r=e[o]||"",s=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;t=tn(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||tn(0==r[2].length,0==s[2].length)||tn(r[2],s[2]),r=r[3],s=s[3]}while(0==t)}return 0<=t}();var t}De.document&&un?bn=mn()||parseInt(cn,10)||void 0:bn=void 0;var Tn=bn,En=function(){if(!De.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{De.addEventListener("test",Le,e),De.removeEventListener("test",Le,e)}catch(t){}return t}();function Sn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function kn(t,e){if(Sn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(pn){t:{try{hn(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Cn[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&kn.Z.h.call(this)}}Sn.prototype.h=function(){this.defaultPrevented=!0},ze(kn,Sn);var Cn={2:"touch",3:"pen",4:"mouse"};kn.prototype.h=function(){kn.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var An="closure_listenable_"+(1e6*Math.random()|0),On=0;function Rn(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ia=r,this.key=++On,this.ca=this.fa=!1}function Nn(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Pn(t){this.src=t,this.g={},this.h=0}function Dn(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=Ke(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Nn(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Ln(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==i)return r}return-1}Pn.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Ln(t,e,i,r);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new Rn(e,this.src,s,!!i,r)).fa=n,t.push(e)),e};var Mn="closure_lm_"+(1e6*Math.random()|0),xn={};function Un(t,e,n,i,r){if(i&&i.once)return jn(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Un(t,e[s],n,i,r);return null}return n=Kn(n),t&&t[An]?t.N(e,n,xe(i)?!!i.capture:!!i,r):Fn(t,e,n,!1,i,r)}function Fn(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=xe(r)?!!r.capture:!!r,a=$n(t);if(a||(t[Mn]=a=new Pn(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){var t=zn;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)En||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Vn(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function jn(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)jn(t,e[s],n,i,r);return null}return n=Kn(n),t&&t[An]?t.O(e,n,xe(i)?!!i.capture:!!i,r):Fn(t,e,n,!0,i,r)}function Bn(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)Bn(t,e[s],n,i,r);else i=xe(i)?!!i.capture:!!i,n=Kn(n),t&&t[An]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Ln(s=t.g[e],n,i,r))&&(Nn(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=$n(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ln(e,n,i,r)),(n=-1<t?e[t]:null)&&Hn(n))}function Hn(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[An])Dn(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Vn(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=$n(e))?(Dn(n,t),0==n.h&&(n.src=null,e[Mn]=null)):Nn(t)}}}function Vn(t){return t in xn?xn[t]:xn[t]="on"+t}function zn(t,e){if(t.ca)t=!0;else{e=new kn(e,this);var n=t.listener,i=t.ia||t.src;t.fa&&Hn(t),t=n.call(i,e)}return t}function $n(t){return(t=t[Mn])instanceof Pn?t:null}var qn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kn(t){return"function"==typeof t?t:(t[qn]||(t[qn]=function(e){return t.handleEvent(e)}),t[qn])}function Gn(){$e.call(this),this.i=new Pn(this),this.P=this,this.I=null}function Wn(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,"string"==typeof e)e=new Sn(e,t);else if(e instanceof Sn)e.target=e.target||t;else{var r=e;an(e=new Sn(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=Jn(o,i,!0,e)&&r}if(r=Jn(o=e.g=t,i,!0,e)&&r,r=Jn(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=Jn(o=e.g=n[s],i,!1,e)&&r}function Jn(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,h=o.ia||o.src;o.fa&&Dn(t.i,o),r=!1!==a.call(h,i)&&r}}return r&&!i.defaultPrevented}ze(Gn,$e),Gn.prototype[An]=!0,Gn.prototype.removeEventListener=function(t,e,n,i){Bn(this,t,e,n,i)},Gn.prototype.M=function(){if(Gn.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)Nn(n[i]);delete e.g[t],e.h--}}this.I=null},Gn.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},Gn.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var Xn=De.JSON.stringify;function Yn(){var t=ri;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Qn,Zn=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new ti),(t=>t.reset()));class ti{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function ei(t){De.setTimeout((()=>{throw t}),0)}function ni(t,e){Qn||function(){var t=De.Promise.resolve(void 0);Qn=function(){t.then(si)}}(),ii||(Qn(),ii=!0),ri.add(t,e)}var ii=!1,ri=new class{constructor(){this.h=this.g=null}add(t,e){const n=Zn.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function si(){for(var t;t=Yn();){try{t.h.call(t.g)}catch(t){ei(t)}var e=Zn;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ii=!1}function oi(t,e){Gn.call(this),this.h=t||1,this.g=e||De,this.j=He(this.kb,this),this.l=Date.now()}function ai(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function hi(t,e,n){if("function"==typeof t)n&&(t=He(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=He(t.handleEvent,t)}return 2147483647<Number(e)?-1:De.setTimeout(t,e||0)}function ci(t){t.g=hi((()=>{t.g=null,t.i&&(t.i=!1,ci(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}ze(oi,Gn),(Oe=oi.prototype).da=!1,Oe.S=null,Oe.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Wn(this,"tick"),this.da&&(ai(this),this.start()))}},Oe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Oe.M=function(){oi.Z.M.call(this),ai(this),delete this.g};class li extends $e{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:ci(this)}M(){super.M(),this.g&&(De.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ui(t){$e.call(this),this.h=t,this.g={}}ze(ui,$e);var di=[];function fi(t,e,n,i){Array.isArray(n)||(n&&(di[0]=n.toString()),n=di);for(var r=0;r<n.length;r++){var s=Un(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function pi(t){rn(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Hn(t)}),t),t.g={}}function gi(){this.g=!0}function mi(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return Xn(n)}catch(t){return e}}(t,n)+(i?" "+i:"")}))}ui.prototype.M=function(){ui.Z.M.call(this),pi(this)},ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},gi.prototype.Aa=function(){this.g=!1},gi.prototype.info=function(){};var vi={},yi=null;function wi(){return yi=yi||new Gn}function bi(t){Sn.call(this,vi.Ma,t)}function Ii(t){const e=wi();Wn(e,new bi(e,t))}function _i(t,e){Sn.call(this,vi.STAT_EVENT,t),this.stat=e}function Ti(t){const e=wi();Wn(e,new _i(e,t))}function Ei(t,e){Sn.call(this,vi.Na,t),this.size=e}function Si(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return De.setTimeout((function(){t()}),e)}vi.Ma="serverreachability",ze(bi,Sn),vi.STAT_EVENT="statevent",ze(_i,Sn),vi.Na="timingevent",ze(Ei,Sn);var ki={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ci={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ai(){}function Oi(t){return t.h||(t.h=t.i())}function Ri(){}Ai.prototype.h=null;var Ni,Pi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Di(){Sn.call(this,"d")}function Li(){Sn.call(this,"c")}function Mi(){}function xi(t,e,n,i){this.l=t,this.j=e,this.m=n,this.X=i||1,this.V=new ui(this),this.P=Fi,t=fn?125:void 0,this.W=new oi(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ui}function Ui(){this.i=null,this.g="",this.h=!1}ze(Di,Sn),ze(Li,Sn),ze(Mi,Ai),Mi.prototype.g=function(){return new XMLHttpRequest},Mi.prototype.i=function(){return{}},Ni=new Mi;var Fi=45e3,ji={},Bi={};function Hi(t,e,n){t.K=1,t.v=lr(rr(e)),t.s=n,t.U=!0,Vi(t,null)}function Vi(t,e){t.F=Date.now(),Ki(t),t.A=rr(t.v);var n=t.A,i=t.X;Array.isArray(i)||(i=[String(i)]),Tr(n.h,"t",i),t.C=0,n=t.l.H,t.h=new Ui,t.g=Ts(t.l,n?e:null,!t.s),0<t.O&&(t.L=new li(He(t.Ia,t,t.g),t.O)),fi(t.V,t.g,"readystatechange",t.gb),e=t.H?sn(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Ii(1),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),h=0;h<a.length;h++){var c=a[h].split("=");if(1<c.length){var l=c[0];c=c[1];var u=l.split("_");o=2<=u.length&&"type"==u[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function zi(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function $i(t,e,n){let i,r=!0;for(;!t.I&&t.C<n.length;){if(i=qi(t,n),i==Bi){4==e&&(t.o=4,Ti(14),r=!1),mi(t.j,t.m,null,"[Incomplete Response]");break}if(i==ji){t.o=4,Ti(15),mi(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}mi(t.j,t.m,i,null),Yi(t,i)}zi(t)&&i!=Bi&&i!=ji&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Ti(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),gs(e),e.L=!0,Ti(11))):(mi(t.j,t.m,n,"[Invalid Chunked Response]"),Xi(t),Ji(t))}function qi(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?Bi:(n=Number(e.substring(n,i)),isNaN(n)?ji:(i+=1)+n>e.length?Bi:(e=e.substr(i,n),t.C=i+n,e))}function Ki(t){t.Y=Date.now()+t.P,Gi(t,t.P)}function Gi(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Si(He(t.eb,t),e)}function Wi(t){t.B&&(De.clearTimeout(t.B),t.B=null)}function Ji(t){0==t.l.G||t.I||ys(t.l,t)}function Xi(t){Wi(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,ai(t.W),pi(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Yi(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Or(n.i,t)))if(n.I=t.N,!t.J&&Or(n.i,t)&&3==n.G){try{var i=n.Ca.g.parse(e)}catch(t){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;vs(n),os(n)}ps(n),Ti(18)}}else n.ta=r[1],0<n.ta-n.U&&37500>r[2]&&n.N&&0==n.A&&!n.v&&(n.v=Si(He(n.ab,n),6e3));if(1>=Ar(n.i)&&n.ka){try{n.ka()}catch(t){}n.ka=void 0}}else bs(n,11)}else if((t.J||n.g==t)&&vs(n),!Xe(e))for(r=n.Ca.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.U=c[0],c=c[1],2==n.G)if("c"==c[0]){n.J=c[1],n.la=c[2];const e=c[3];null!=e&&(n.ma=e,n.h.info("VER="+n.ma));const r=c[4];null!=r&&(n.za=r,n.h.info("SVER="+n.za));const l=c[5];null!=l&&"number"==typeof l&&0<l&&(i=1.5*l,n.K=i,n.h.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=t.g;if(u){const t=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.i;!s.g&&(Ze(t,"spdy")||Ze(t,"quic")||Ze(t,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(Rr(s,s.h),s.h=null))}if(i.D){const t=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.sa=t,cr(i.F,i.D,t))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=t;if((i=n).oa=_s(i,i.H?i.la:null,i.W),o.J){Nr(i.i,o);var a=o,h=i.K;h&&a.setTimeout(h),a.B&&(Wi(a),Ki(a)),i.g=o}else fs(i);0<n.l.length&&cs(n)}else"stop"!=c[0]&&"close"!=c[0]||bs(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?bs(n,7):ss(n):"noop"!=c[0]&&n.j&&n.j.wa(c),n.A=0)}Ii(4)}catch(t){}}function Qi(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Me(t)||"string"==typeof t)Ge(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Me(t)||"string"==typeof t){n=[];for(var i=t.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,t)n[i++]=r;i=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Me(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length;for(var s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}}function Zi(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof Zi)for(n=t.T(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function tr(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var i=t.g[e];er(t.h,i)&&(t.g[n++]=i),e++}t.g.length=n}if(t.i!=t.g.length){var r={};for(n=e=0;e<t.g.length;)er(r,i=t.g[e])||(t.g[n++]=i,r[i]=1),e++;t.g.length=n}}function er(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Oe=xi.prototype).setTimeout=function(t){this.P=t},Oe.gb=function(t){t=t.target;const e=this.L;e&&3==ts(t)?e.l():this.Ia(t)},Oe.Ia=function(t){try{if(t==this.g)t:{const l=ts(this.g);var e=this.g.Da();const u=this.g.ba();if(!(3>l)&&(3!=l||fn||this.g&&(this.h.h||this.g.ga()||es(this.g)))){this.I||4!=l||7==e||Ii(8==e||0>=u?3:2),Wi(this);var n=this.g.ba();this.N=n;e:if(zi(this)){var i=es(this.g);t="";var r=i.length,s=4==ts(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Xi(this),Ji(this);var o="";break e}this.h.i=new De.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){e:{if(this.g){var a,h=this.g;if((a=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xe(a)){var c=a;break e}}c=null}if(!(n=c)){this.i=!1,this.o=3,Ti(12),Xi(this),Ji(this);break t}mi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Yi(this,n)}this.U?($i(this,l,o),fn&&this.i&&3==l&&(fi(this.V,this.W,"tick",this.fb),this.W.start())):(mi(this.j,this.m,o,null),Yi(this,o)),4==l&&Xi(this),this.i&&!this.I&&(4==l?ys(this.l,this):(this.i=!1,Ki(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Ti(12)):(this.o=0,Ti(13)),Xi(this),Ji(this)}}}catch(t){}},Oe.fb=function(){if(this.g){var t=ts(this.g),e=this.g.ga();this.C<e.length&&(Wi(this),$i(this,t,e),this.i&&4!=t&&Ki(this))}},Oe.cancel=function(){this.I=!0,Xi(this)},Oe.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Ii(3),Ti(17)),Xi(this),this.o=2,Ji(this)):Gi(this,this.Y-t)},(Oe=Zi.prototype).R=function(){tr(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Oe.T=function(){return tr(this),this.g.concat()},Oe.get=function(t,e){return er(this.h,t)?this.h[t]:e},Oe.set=function(t,e){er(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Oe.forEach=function(t,e){for(var n=this.T(),i=0;i<n.length;i++){var r=n[i],s=this.get(r);t.call(e,s,r,this)}};var nr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ir(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof ir){this.g=void 0!==e?e:t.g,sr(this,t.j),this.s=t.s,or(this,t.i),ar(this,t.m),this.l=t.l,e=t.h;var n=new wr;n.i=e.i,e.g&&(n.g=new Zi(e.g),n.h=e.h),hr(this,n),this.o=t.o}else t&&(n=String(t).match(nr))?(this.g=!!e,sr(this,n[1]||"",!0),this.s=ur(n[2]||""),or(this,n[3]||"",!0),ar(this,n[4]),this.l=ur(n[5]||"",!0),hr(this,n[6]||"",!0),this.o=ur(n[7]||"")):(this.g=!!e,this.h=new wr(null,this.g))}function rr(t){return new ir(t)}function sr(t,e,n){t.j=n?ur(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function or(t,e,n){t.i=n?ur(e,!0):e}function ar(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function hr(t,e,n){e instanceof wr?(t.h=e,function(t,e){e&&!t.j&&(br(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ir(this,e),Tr(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=dr(e,vr)),t.h=new wr(e,t.g))}function cr(t,e,n){t.h.set(e,n)}function lr(t){return cr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ur(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function dr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,fr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function fr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ir.prototype.toString=function(){var t=[],e=this.j;e&&t.push(dr(e,pr,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(dr(e,pr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(dr(n,"/"==n.charAt(0)?mr:gr,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",dr(n,yr)),t.join("")};var pr=/[#\/\?@]/g,gr=/[#\?:]/g,mr=/[#\?]/g,vr=/[#\?@]/g,yr=/#/g;function wr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function br(t){t.g||(t.g=new Zi,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ir(t,e){br(t),e=Er(t,e),er(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,er((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&tr(t)))}function _r(t,e){return br(t),e=Er(t,e),er(t.g.h,e)}function Tr(t,e,n){Ir(t,e),0<n.length&&(t.i=null,t.g.set(Er(t,e),Je(n)),t.h+=n.length)}function Er(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Sr(t){this.l=t||kr,t=De.PerformanceNavigationTiming?0<(t=De.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(De.g&&De.g.Ea&&De.g.Ea()&&De.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Oe=wr.prototype).add=function(t,e){br(this),this.i=null,t=Er(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Oe.forEach=function(t,e){br(this),this.g.forEach((function(n,i){Ge(n,(function(n){t.call(e,n,i,this)}),this)}),this)},Oe.T=function(){br(this);for(var t=this.g.R(),e=this.g.T(),n=[],i=0;i<e.length;i++)for(var r=t[i],s=0;s<r.length;s++)n.push(e[i]);return n},Oe.R=function(t){br(this);var e=[];if("string"==typeof t)_r(this,t)&&(e=We(e,this.g.get(Er(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=We(e,t[n])}return e},Oe.set=function(t,e){return br(this),this.i=null,_r(this,t=Er(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Oe.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var o=r;""!==i[s]&&(o+="="+encodeURIComponent(String(i[s]))),t.push(o)}}return this.i=t.join("&")};var kr=10;function Cr(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Ar(t){return t.h?1:t.g?t.g.size:0}function Or(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Rr(t,e){t.g?t.g.add(e):t.h=e}function Nr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Pr(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return Je(t.i)}function Dr(){}function Lr(){this.g=new Dr}function Mr(t,e,n){const i=n||"";try{Qi(t,(function(t,n){let r=t;xe(t)&&(r=Xn(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function xr(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(t){}}function Ur(t){this.l=t.$b||null,this.j=t.ib||!1}function Fr(t,e){Gn.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=jr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Sr.prototype.cancel=function(){if(this.i=Pr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},Dr.prototype.stringify=function(t){return De.JSON.stringify(t,void 0)},Dr.prototype.parse=function(t){return De.JSON.parse(t,void 0)},ze(Ur,Ai),Ur.prototype.g=function(){return new Fr(this.l,this.j)},Ur.prototype.i=function(t){return function(){return t}}({}),ze(Fr,Gn);var jr=0;function Br(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Hr(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Vr(t)}function Vr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Oe=Fr.prototype).open=function(t,e){if(this.readyState!=jr)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Vr(this)},Oe.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||De).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hr(this)),this.readyState=jr},Oe.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Vr(this)),this.g&&(this.readyState=3,Vr(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==De.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Br(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Oe.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Hr(this):Vr(this),3==this.readyState&&Br(this)}},Oe.Ua=function(t){this.g&&(this.response=this.responseText=t,Hr(this))},Oe.Ta=function(t){this.g&&(this.response=t,Hr(this))},Oe.ha=function(){this.g&&Hr(this)},Oe.setRequestHeader=function(t,e){this.v.append(t,e)},Oe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Oe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Fr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var zr=De.JSON.parse;function $r(t){Gn.call(this),this.headers=new Zi,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=qr,this.K=this.L=!1}ze($r,Gn);var qr="",Kr=/^https?$/i,Gr=["POST","PUT"];function Wr(t){return"content-type"==t.toLowerCase()}function Jr(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Xr(t),Qr(t)}function Xr(t){t.D||(t.D=!0,Wn(t,"complete"),Wn(t,"error"))}function Yr(t){if(t.h&&void 0!==Pe&&(!t.C[1]||4!=ts(t)||2!=t.ba()))if(t.v&&4==ts(t))hi(t.Fa,0,t);else if(Wn(t,"readystatechange"),4==ts(t)){t.h=!1;try{const a=t.ba();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===a){var r=String(t.H).match(nr)[1]||null;if(!r&&De.self&&De.self.location){var s=De.self.location.protocol;r=s.substr(0,s.length-1)}i=!Kr.test(r?r.toLowerCase():"")}n=i}if(n)Wn(t,"complete"),Wn(t,"success");else{t.m=6;try{var o=2<ts(t)?t.g.statusText:""}catch(t){o=""}t.j=o+" ["+t.ba()+"]",Xr(t)}}finally{Qr(t)}}}function Qr(t,e){if(t.g){Zr(t);const n=t.g,i=t.C[0]?Le:null;t.g=null,t.C=null,e||Wn(t,"ready");try{n.onreadystatechange=i}catch(t){}}}function Zr(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(De.clearTimeout(t.A),t.A=null)}function ts(t){return t.g?t.g.readyState:0}function es(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case qr:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function ns(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=function(t){let e="";return rn(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):cr(t,e,n))}function is(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function rs(t){this.za=0,this.l=[],this.h=new gi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=is("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=is("baseRetryDelayMs",5e3,t),this.$a=is("retryDelaySeedMs",1e4,t),this.Ya=is("forwardChannelMaxRetries",2,t),this.ra=is("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Sr(t&&t.concurrentRequestLimit),this.Ca=new Lr,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function ss(t){if(as(t),3==t.G){var e=t.V++,n=rr(t.F);cr(n,"SID",t.J),cr(n,"RID",e),cr(n,"TYPE","terminate"),us(t,n),(e=new xi(t,t.h,e,void 0)).K=2,e.v=lr(rr(n)),n=!1,De.navigator&&De.navigator.sendBeacon&&(n=De.navigator.sendBeacon(e.v.toString(),"")),!n&&De.Image&&((new Image).src=e.v,n=!0),n||(e.g=Ts(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ki(e)}Is(t)}function os(t){t.g&&(gs(t),t.g.cancel(),t.g=null)}function as(t){os(t),t.u&&(De.clearTimeout(t.u),t.u=null),vs(t),t.i.cancel(),t.m&&("number"==typeof t.m&&De.clearTimeout(t.m),t.m=null)}function hs(t,e){t.l.push(new class{constructor(t,e){this.h=t,this.g=e}}(t.Za++,e)),3==t.G&&cs(t)}function cs(t){Cr(t.i)||t.m||(t.m=!0,ni(t.Ha,t),t.C=0)}function ls(t,e){var n;n=e?e.m:t.V++;const i=rr(t.F);cr(i,"SID",t.J),cr(i,"RID",n),cr(i,"AID",t.U),us(t,i),t.o&&t.s&&ns(i,t.o,t.s),n=new xi(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=ds(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Rr(t.i,n),Hi(n,i,e)}function us(t,e){t.j&&Qi({},(function(t,n){cr(e,n,t)}))}function ds(t,e,n){n=Math.min(t.l.length,n);var i=t.j?He(t.j.Oa,t.j,t):null;t:{var r=t.l;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=r[o].h;const a=r[o].g;if(n-=e,0>n)e=Math.max(0,r[o].h-100),s=!1;else try{Mr(a,t,"req"+n+"_")}catch(t){i&&i(a)}}if(s){i=t.join("&");break t}}}return t=t.l.splice(0,n),e.D=t,i}function fs(t){t.g||t.u||(t.Y=1,ni(t.Ga,t),t.A=0)}function ps(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Si(He(t.Ga,t),ws(t,t.A)),t.A++,0))}function gs(t){null!=t.B&&(De.clearTimeout(t.B),t.B=null)}function ms(t){t.g=new xi(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=rr(t.oa);cr(e,"RID","rpc"),cr(e,"SID",t.J),cr(e,"CI",t.N?"0":"1"),cr(e,"AID",t.U),us(t,e),cr(e,"TYPE","xmlhttp"),t.o&&t.s&&ns(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=lr(rr(e)),n.s=null,n.U=!0,Vi(n,t)}function vs(t){null!=t.v&&(De.clearTimeout(t.v),t.v=null)}function ys(t,e){var n=null;if(t.g==e){vs(t),gs(t),t.g=null;var i=2}else{if(!Or(t.i,e))return;n=e.D,Nr(t.i,e),i=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==i){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;Wn(i=wi(),new Ei(i,n,e,r)),cs(t)}else fs(t);else if(3==(r=e.o)||0==r&&0<t.I||!(1==i&&function(t,e){return!(Ar(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Si(He(t.Ha,t,e),ws(t,t.C)),t.C++,0)))}(t,e)||2==i&&ps(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:bs(t,5);break;case 4:bs(t,10);break;case 3:bs(t,6);break;default:bs(t,2)}}function ws(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function bs(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var i=He(t.jb,t);n||(n=new ir("//www.google.com/images/cleardot.gif"),De.location&&"http"==De.location.protocol||sr(n,"https"),lr(n)),function(t,e){const n=new gi;if(De.Image){const i=new Image;i.onload=Ve(xr,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Ve(xr,n,i,"TestLoadImage: error",!1,e),i.onabort=Ve(xr,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Ve(xr,n,i,"TestLoadImage: timeout",!1,e),De.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else Ti(2);t.G=0,t.j&&t.j.va(e),Is(t),as(t)}function Is(t){t.G=0,t.I=-1,t.j&&(0==Pr(t.i).length&&0==t.l.length||(t.i.i.length=0,Je(t.l),t.l.length=0),t.j.ua())}function _s(t,e,n){let i=function(t){return t instanceof ir?rr(t):new ir(t,void 0)}(n);if(""!=i.i)e&&or(i,e+"."+i.i),ar(i,i.m);else{const t=De.location;i=function(t,e,n,i){var r=new ir(null,void 0);return t&&sr(r,t),e&&or(r,e),n&&ar(r,n),i&&(r.l=i),r}(t.protocol,e?e+"."+t.hostname:t.hostname,+t.port,n)}return t.aa&&rn(t.aa,(function(t,e){cr(i,e,t)})),e=t.D,n=t.sa,e&&n&&cr(i,e,n),cr(i,"VER",t.ma),us(t,i),i}function Ts(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new $r(new Ur({ib:!0})):new $r(t.qa)).L=t.H,e}function Es(){}function Ss(){if(un&&!(10<=Number(Tn)))throw Error("Environmental error: no available transport.")}function ks(t,e){Gn.call(this),this.g=new rs(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Xe(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Xe(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Os(this)}function Cs(t){Di.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function As(){Li.call(this),this.status=1}function Os(t){this.g=t}(Oe=$r.prototype).ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ni.g(),this.C=this.u?Oi(this.u):Oi(Ni),this.g.onreadystatechange=He(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void Jr(this,t)}t=n||"";const r=new Zi(this.headers);i&&Qi(i,(function(t,e){r.set(e,t)})),i=function(t){t:{var e=Wr;const n=t.length,i="string"==typeof t?t.split(""):t;for(let r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(r.T()),n=De.FormData&&t instanceof De.FormData,!(0<=Ke(Gr,e))||i||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Zr(this),0<this.B&&((this.K=function(t){return un&&_n()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=He(this.pa,this)):this.A=hi(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Jr(this,t)}},Oe.pa=function(){void 0!==Pe&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wn(this,"timeout"),this.abort(8))},Oe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Wn(this,"complete"),Wn(this,"abort"),Qr(this))},Oe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qr(this,!0)),$r.Z.M.call(this)},Oe.Fa=function(){this.s||(this.F||this.v||this.l?Yr(this):this.cb())},Oe.cb=function(){Yr(this)},Oe.ba=function(){try{return 2<ts(this)?this.g.status:-1}catch(t){return-1}},Oe.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Oe.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),zr(e)}},Oe.Da=function(){return this.m},Oe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Oe=rs.prototype).ma=8,Oe.G=1,Oe.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},Oe.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const r=new xi(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=sn(s),an(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)t:{for(var e=0,n=0;n<this.l.length;n++){var i=this.l[n];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.l.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=ds(this,r,e),cr(n=rr(this.F),"RID",t),cr(n,"CVER",22),this.D&&cr(n,"X-HTTP-Session-Id",this.D),us(this,n),this.o&&s&&ns(n,this.o,s),Rr(this.i,r),this.Ra&&cr(n,"TYPE","init"),this.ja?(cr(n,"$req",e),cr(n,"SID","null"),r.$=!0,Hi(r,n,null)):Hi(r,n,e),this.G=2}}else 3==this.G&&(t?ls(this,t):0==this.l.length||Cr(this.i)||ls(this))},Oe.Ga=function(){if(this.u=null,ms(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Si(He(this.bb,this),t)}},Oe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ti(10),os(this),ms(this))},Oe.ab=function(){null!=this.v&&(this.v=null,os(this),ps(this),Ti(19))},Oe.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Ti(2)):(this.h.info("Failed to ping google.com"),Ti(1))},(Oe=Es.prototype).xa=function(){},Oe.wa=function(){},Oe.va=function(){},Oe.ua=function(){},Oe.Oa=function(){},Ss.prototype.g=function(t,e){return new ks(t,e)},ze(ks,Gn),ks.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),ni(He(t.hb,t,e))),Ti(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=_s(t,null,t.W),cs(t)},ks.prototype.close=function(){ss(this.g)},ks.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,hs(this.g,e)}else this.v?((e={}).__data__=Xn(t),hs(this.g,e)):hs(this.g,t)},ks.prototype.M=function(){this.g.j=null,delete this.j,ss(this.g),delete this.g,ks.Z.M.call(this)},ze(Cs,Di),ze(As,Li),ze(Os,Es),Os.prototype.xa=function(){Wn(this.g,"a")},Os.prototype.wa=function(t){Wn(this.g,new Cs(t))},Os.prototype.va=function(t){Wn(this.g,new As(t))},Os.prototype.ua=function(){Wn(this.g,"b")},Ss.prototype.createWebChannel=Ss.prototype.g,ks.prototype.send=ks.prototype.u,ks.prototype.open=ks.prototype.m,ks.prototype.close=ks.prototype.close,ki.NO_ERROR=0,ki.TIMEOUT=8,ki.HTTP_ERROR=6,Ci.COMPLETE="complete",Ri.EventType=Pi,Pi.OPEN="a",Pi.CLOSE="b",Pi.ERROR="c",Pi.MESSAGE="d",Gn.prototype.listen=Gn.prototype.N,$r.prototype.listenOnce=$r.prototype.O,$r.prototype.getLastError=$r.prototype.La,$r.prototype.getLastErrorCode=$r.prototype.Da,$r.prototype.getStatus=$r.prototype.ba,$r.prototype.getResponseJson=$r.prototype.Qa,$r.prototype.getResponseText=$r.prototype.ga,$r.prototype.send=$r.prototype.ea,Ne.createWebChannelTransport=function(){return new Ss},Ne.getStatEventTarget=function(){return wi()},Ne.ErrorCode=ki,Ne.EventType=Ci,Ne.Event=vi,Ne.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ne.FetchXmlHttpFactory=Ur,Ne.WebChannel=Ri,Ne.XhrIo=$r;const Rs="@firebase/firestore";class Ns{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ns.UNAUTHENTICATED=new Ns(null),Ns.GOOGLE_CREDENTIALS=new Ns("google-credentials-uid"),Ns.FIRST_PARTY=new Ns("first-party-uid"),Ns.MOCK_USER=new Ns("mock-user");let Ps="9.9.0";const Ds=new j("@firebase/firestore");function Ls(t,...e){if(Ds.logLevel<=D.DEBUG){const n=e.map(xs);Ds.debug(`Firestore (${Ps}): ${t}`,...n)}}function Ms(t,...e){if(Ds.logLevel<=D.ERROR){const n=e.map(xs);Ds.error(`Firestore (${Ps}): ${t}`,...n)}}function xs(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Us(t="Unexpected state"){const e=`FIRESTORE (${Ps}) INTERNAL ASSERTION FAILED: `+t;throw Ms(e),new Error(e)}function Fs(t,e){t||Us()}const js="cancelled",Bs="invalid-argument",Hs="failed-precondition",Vs="unavailable";class zs extends m{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $s{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class qs{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ks{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Ns.UNAUTHENTICATED)))}shutdown(){}}class Gs{constructor(t){this.t=t,this.currentUser=Ns.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new $s;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new $s,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{Ls("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Ls("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new $s)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Ls("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Fs("string"==typeof e.accessToken),new qs(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Fs(null===t||"string"==typeof t),new Ns(t)}}class Ws{constructor(t,e,n){this.type="FirstParty",this.user=Ns.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class Js{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new Ws(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e(Ns.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Xs{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ys{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const n=t=>{null!=t.error&&Ls("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.p;return this.p=t.token,Ls("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{Ls("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.g.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.g.getImmediate({optional:!0});t?i(t):Ls("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(Fs("string"==typeof t.token),this.p=t.token,new Xs(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Qs(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}function Zs(t,e){return t<e?-1:t>e?1:0}class to{constructor(t,e,n){void 0===e?e=0:e>t.length&&Us(),void 0===n?n=t.length-e:n>t.length-e&&Us(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===to.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof to?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class eo extends to{construct(t,e,n){return new eo(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new zs(Bs,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new eo(e)}static emptyPath(){return new eo([])}}class no{constructor(t){this.path=t}static fromPath(t){return new no(eo.fromString(t))}static fromName(t){return new no(eo.fromString(t).popFirst(5))}static empty(){return new no(eo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===eo.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return eo.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new no(new eo(t.slice()))}}function io(t){return"IndexedDbTransactionError"===t.name}class ro{constructor(t,e){this.comparator=t,this.root=e||oo.EMPTY}insert(t,e){return new ro(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,oo.BLACK,null,null))}remove(t){return new ro(this.comparator,this.root.remove(t,this.comparator).copy(null,null,oo.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new so(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new so(this.root,t,this.comparator,!1)}getReverseIterator(){return new so(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new so(this.root,t,this.comparator,!0)}}class so{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class oo{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:oo.RED,this.left=null!=i?i:oo.EMPTY,this.right=null!=r?r:oo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new oo(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return oo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return oo.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,oo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,oo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Us();if(this.right.isRed())throw Us();const t=this.left.check();if(t!==this.right.check())throw Us();return t+(this.isRed()?0:1)}}oo.EMPTY=null,oo.RED=!0,oo.BLACK=!1,oo.EMPTY=new class{constructor(){this.size=0}get key(){throw Us()}get value(){throw Us()}get color(){throw Us()}get left(){throw Us()}get right(){throw Us()}copy(t,e,n,i,r){return this}insert(t,e,n){return new oo(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ao{constructor(t){this.comparator=t,this.data=new ro(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new ho(this.data.getIterator())}getIteratorFrom(t){return new ho(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof ao))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new ao(this.comparator);return e.data=t,e}}class ho{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class co{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new co(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new co(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Zs(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}function lo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}co.EMPTY_BYTE_STRING=new co("");class uo{constructor(t,e,n,i,r,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class fo{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new fo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof fo&&t.projectId===this.projectId&&t.database===this.database}}var po,go;(go=po||(po={}))[go.OK=0]="OK",go[go.CANCELLED=1]="CANCELLED",go[go.UNKNOWN=2]="UNKNOWN",go[go.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",go[go.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",go[go.NOT_FOUND=5]="NOT_FOUND",go[go.ALREADY_EXISTS=6]="ALREADY_EXISTS",go[go.PERMISSION_DENIED=7]="PERMISSION_DENIED",go[go.UNAUTHENTICATED=16]="UNAUTHENTICATED",go[go.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",go[go.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",go[go.ABORTED=10]="ABORTED",go[go.OUT_OF_RANGE=11]="OUT_OF_RANGE",go[go.UNIMPLEMENTED=12]="UNIMPLEMENTED",go[go.INTERNAL=13]="INTERNAL",go[go.UNAVAILABLE=14]="UNAVAILABLE",go[go.DATA_LOSS=15]="DATA_LOSS",new ro(no.comparator),new ro(no.comparator),new ro(no.comparator),new ao(no.comparator),new ao(Zs);class mo{constructor(){}re(t,e){this.oe(t,e),e.ue()}oe(t,e){if("nullValue"in t)this.ce(e,5);else if("booleanValue"in t)this.ce(e,10),e.ae(t.booleanValue?1:0);else if("integerValue"in t)this.ce(e,15),e.ae(lo(t.integerValue));else if("doubleValue"in t){const n=lo(t.doubleValue);isNaN(n)?this.ce(e,13):(this.ce(e,15),function(t){return 0===t&&1/t==-1/0}(n)?e.ae(0):e.ae(n))}else if("timestampValue"in t){const n=t.timestampValue;this.ce(e,20),"string"==typeof n?e.he(n):(e.he(`${n.seconds||""}`),e.ae(n.nanos||0))}else if("stringValue"in t)this.le(t.stringValue,e),this.fe(e);else if("bytesValue"in t)this.ce(e,30),e.de(function(t){return"string"==typeof t?co.fromBase64String(t):co.fromUint8Array(t)}(t.bytesValue)),this.fe(e);else if("referenceValue"in t)this._e(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.ce(e,45),e.ae(n.latitude||0),e.ae(n.longitude||0)}else"mapValue"in t?function(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}(t)?this.ce(e,Number.MAX_SAFE_INTEGER):(this.we(t.mapValue,e),this.fe(e)):"arrayValue"in t?(this.me(t.arrayValue,e),this.fe(e)):Us()}le(t,e){this.ce(e,25),this.ge(t,e)}ge(t,e){e.he(t)}we(t,e){const n=t.fields||{};this.ce(e,55);for(const t of Object.keys(n))this.le(t,e),this.oe(n[t],e)}me(t,e){const n=t.values||[];this.ce(e,50);for(const t of n)this.oe(t,e)}_e(t,e){this.ce(e,37),no.fromName(t).path.forEach((t=>{this.ce(e,60),this.ge(t,e)}))}ce(t,e){t.ae(e)}fe(t){t.ae(2)}}mo.ye=new mo,new Uint8Array(0);class vo{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new vo(t,vo.DEFAULT_COLLECTION_PERCENTILE,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function yo(){return"undefined"!=typeof document?document:null}vo.DEFAULT_COLLECTION_PERCENTILE=10,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vo.DEFAULT=new vo(41943040,vo.DEFAULT_COLLECTION_PERCENTILE,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vo.DISABLED=new vo(-1,0,0);class wo{constructor(t,e,n=1e3,i=1.5,r=6e4){this.js=t,this.timerId=e,this.lo=n,this.fo=i,this._o=r,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(t){this.cancel();const e=Math.floor(this.wo+this.To()),n=Math.max(0,Date.now()-this.yo),i=Math.max(0,e-n);i>0&&Ls("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(()=>(this.yo=Date.now(),t()))),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class bo{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new $s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new bo(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zs(js,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class Io{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=Ns.UNAUTHENTICATED,this.clientId=class{static I(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=Qs(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%t.length))}return n}}.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Ls("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Ls("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new zs(Hs,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new $s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=function(t,e){if(Ms("AsyncQueue",`${e}: ${t}`),io(t))return new zs(Vs,`${e}: ${t}`);throw t}(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}const _o=new Map;class To{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new zs(Bs,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new zs(Bs,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(t,e,n,i){if(!0===e&&!0===i)throw new zs(Bs,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Eo{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new wo(this,"async_queue_retry"),this.Kc=()=>{const t=yo();t&&Ls("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const t=yo();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Gc(),this.Qc(t)}enterRestrictedMode(t){if(!this.Fc){this.Fc=!0,this.Uc=t||!1;const e=yo();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Kc)}}enqueue(t){if(this.Gc(),this.Fc)return new Promise((()=>{}));const e=new $s;return this.Qc((()=>this.Fc&&this.Uc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Mc.push(t),this.jc())))}async jc(){if(0!==this.Mc.length){try{await this.Mc[0](),this.Mc.shift(),this.So.reset()}catch(t){if(!io(t))throw t;Ls("AsyncQueue","Operation failed with retryable error: "+t)}this.Mc.length>0&&this.So.Io((()=>this.jc()))}}Qc(t){const e=this.Oc.then((()=>(this.Lc=!0,t().catch((t=>{this.Bc=t,this.Lc=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw Ms("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Lc=!1,t))))));return this.Oc=e,e}enqueueAfterDelay(t,e,n){this.Gc(),this.qc.indexOf(t)>-1&&(e=0);const i=bo.createAndSchedule(this,t,e,n,(t=>this.Wc(t)));return this.$c.push(i),i}Gc(){this.Bc&&Us()}verifyOperationInProgress(){}async zc(){let t;do{t=this.Oc,await t}while(t!==this.Oc)}Hc(t){for(const e of this.$c)if(e.timerId===t)return!0;return!1}Jc(t){return this.zc().then((()=>{this.$c.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.$c)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.zc()}))}Yc(t){this.qc.push(t)}Wc(t){const e=this.$c.indexOf(t);this.$c.splice(e,1)}}class So extends class{constructor(t,e,n){this._authCredentials=e,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new To({}),this._settingsFrozen=!1,t instanceof fo?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new zs(Bs,'"projectId" not provided in firebase.initializeApp.');return new fo(t.options.projectId)}(t))}get app(){if(!this._app)throw new zs(Hs,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new zs(Hs,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new To(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Ks;switch(t.type){case"gapi":const e=t.client;return Fs(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Js(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new zs(Bs,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=_o.get(t);e&&(Ls("ComponentProvider","Removing Datastore"),_o.delete(t),e.terminate())}(this),Promise.resolve()}}{constructor(t,e,n){super(t,e,n),this.type="firestore",this._queue=new Eo,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||function(t){var e;const n=t._freezeSettings(),i=function(t,e,n,i){return new uo(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Io(t._authCredentials,t._appCheckCredentials,t._queue,i)}(this),this._firestoreClient.terminate()}}function ko(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}!function(t,e=!0){Ps="9.9.0",ut(new A("firestore",((t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=new So(i,new Gs(t.getProvider("auth-internal")),new Ys(t.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:e},n),r._setSettings(n),r}),"PUBLIC")),gt(Rs,"3.4.12",t),gt(Rs,"3.4.12","esm2017")}(),Object.create,Object.create;const Co=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ao=new v("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oo=new j("@firebase/auth");function Ro(t,...e){Oo.logLevel<=D.ERROR&&Oo.error(`Auth (9.9.0): ${t}`,...e)}function No(t,...e){throw Do(t,...e)}function Po(t,...e){return Do(t,...e)}function Do(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Ao.create(t,...e)}function Lo(t,e,...n){if(!t)throw Do(e,...n)}function Mo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ro(e),new Error(e)}function xo(t,e){t||Mo(e)}const Uo=new Map;function Fo(t){xo(t instanceof Function,"Expected a class definition");let e=Uo.get(t);return e?(xo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Uo.set(t,e),e)}function jo(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class Bo{constructor(t,e){this.shortDelay=t,this.longDelay=e,xo(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===jo()||"https:"===jo()||f()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}class Ho{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Mo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Mo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Mo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vo={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},zo=new Bo(3e4,6e4);function $o(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function qo(t,e,n,i,r={}){return Ko(t,r,(async()=>{let r={},s={};i&&("GET"===e?s=i:r={body:JSON.stringify(i)});const o=I(Object.assign({key:t.config.apiKey},s)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),Ho.fetch()(Wo(t,t.config.apiHost,n,o),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},r))}))}async function Ko(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Vo),e);try{const e=new Jo(t),r=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw Xo(t,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const e=r.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Xo(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Xo(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw Xo(t,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(t,e,n){const i=Object.assign(Object.assign({},Co()),{[e]:n});return new v("auth","Firebase",i).create(e,{appName:t.name})}(t,a,o);No(t,a)}}catch(e){if(e instanceof m)throw e;No(t,"network-request-failed")}}async function Go(t,e,n,i,r={}){const s=await qo(t,e,n,i,r);return"mfaPendingCredential"in s&&No(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Wo(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?function(t,e){xo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}(t.config,r):`${t.config.apiScheme}://${r}`}class Jo{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(Po(this.auth,"network-request-failed"))),zo.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xo(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Po(t,e,i);return r.customData._tokenResponse=n,r}function Yo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function Qo(t){return 1e3*Number(t)}function Zo(t){var e;const[n,i,r]=t.split(".");if(void 0===n||void 0===i||void 0===r)return Ro("JWT malformed, contained fewer than 3 sections"),null;try{const t=function(t){try{return c.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(i);return t?JSON.parse(t):(Ro("Failed to decode base64 JWT payload"),null)}catch(t){return Ro("Caught error parsing JWT payload as JSON",null===(e=t)||void 0===e?void 0:e.toString()),null}}async function ta(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof m&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class ea{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){var t;try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===(t=e)||void 0===t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}class na{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yo(this.lastLoginAt),this.creationTime=Yo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ia(t){var e;const n=t.auth,i=await t.getIdToken(),r=await ta(t,async function(t,e){return qo(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:i}));Lo(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?s.providerUserInfo.map((t=>{var{providerId:e}=t,n=ko(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(h=t.providerData,c=o,[...h.filter((t=>!c.some((e=>e.providerId===t.providerId)))),...c]);var h,c;const l=t.isAnonymous,u=!(t.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!l&&u,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new na(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}class ra{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Lo(t.idToken,"internal-error"),Lo(void 0!==t.idToken,"internal-error"),Lo(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=Zo(t);return Lo(e,"internal-error"),Lo(void 0!==e.exp,"internal-error"),Lo(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return Lo(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(t,e){const n=await Ko(t,{},(async()=>{const n=I({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,s=Wo(t,i,"/v1/token",`key=${r}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Ho.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new ra;return n&&(Lo("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(Lo("string"==typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(Lo("number"==typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ra,this.toJSON())}_performRefresh(){return Mo("not implemented")}}function sa(t,e){Lo("string"==typeof t||void 0===t,"internal-error",{appName:e})}class oa{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=ko(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ea(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new na(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await ta(this,this.stsTokenManager.getToken(this.auth,t));return Lo(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=C(t),i=await n.getIdToken(e),r=Zo(i);Lo(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Yo(Qo(r.auth_time)),issuedAtTime:Yo(Qo(r.iat)),expirationTime:Yo(Qo(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=C(t);await ia(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(Lo(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new oa(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){Lo(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await ia(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await ta(this,async function(t,e){return qo(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,h,c;const l=null!==(n=e.displayName)&&void 0!==n?n:void 0,u=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=e.photoURL)&&void 0!==s?s:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,m=null!==(h=e.createdAt)&&void 0!==h?h:void 0,v=null!==(c=e.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:I,stsTokenManager:_}=e;Lo(y&&_,t,"internal-error");const T=ra.fromJSON(this.name,_);Lo("string"==typeof y,t,"internal-error"),sa(l,t.name),sa(u,t.name),Lo("boolean"==typeof w,t,"internal-error"),Lo("boolean"==typeof b,t,"internal-error"),sa(d,t.name),sa(f,t.name),sa(p,t.name),sa(g,t.name),sa(m,t.name),sa(v,t.name);const E=new oa({uid:y,auth:t,email:u,emailVerified:w,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:m,lastLoginAt:v});return I&&Array.isArray(I)&&(E.providerData=I.map((t=>Object.assign({},t)))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(t,e,n=!1){const i=new ra;i.updateFromServerResponse(e);const r=new oa({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await ia(r),r}}class aa{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}aa.type="NONE";const ha=aa;function ca(t,e,n){return`firebase:${t}:${e}:${n}`}class la{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=ca(this.userKey,i.apiKey,r),this.fullPersistenceKey=ca("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?oa._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new la(Fo(ha),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let r=i[0]||Fo(ha);const s=ca(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(s);if(e){const i=oa._fromJSON(t,e);n!==r&&(o=i),r=n;break}}catch(t){}const a=i.filter((t=>t._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==r)try{await t._remove(s)}catch(t){}}))),new la(r,t,n)):new la(r,t,n)}}function ua(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fa(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function(t=d()){return/firefox\//i.test(t)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ga(e))return"Blackberry";if(ma(e))return"Webos";if(da(e))return"Safari";if((e.includes("chrome/")||function(t=d()){return/crios\//i.test(t)}(e))&&!e.includes("edge/"))return"Chrome";if(pa(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function da(t=d()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fa(t=d()){return/iemobile/i.test(t)}function pa(t=d()){return/android/i.test(t)}function ga(t=d()){return/blackberry/i.test(t)}function ma(t=d()){return/webos/i.test(t)}function va(t=d()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ya(t,e=[]){let n;switch(t){case"Browser":n=ua(d());break;case"Worker":n=`${ua(d())}-${t}`;break;default:n=t}return`${n}/JsCore/9.9.0/${e.length?e.join(","):"FirebaseCore-web"}`}class wa{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,i)=>{try{n(t(e))}catch(t){i(t)}}));n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){var e;if(this.auth.currentUser===t)return;const n=[];try{for(const e of this.queue)await e(t),e.onAbort&&n.push(e.onAbort)}catch(t){n.reverse();for(const t of n)try{t()}catch(t){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(e=t)||void 0===e?void 0:e.message})}}}class ba{constructor(t,e,n){this.app=t,this.heartbeatServiceProvider=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _a(this),this.idTokenSubscription=new _a(this),this.beforeStateQueue=new wa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ao,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Fo(e)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await la.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,s=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==s||!(null==o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(t){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(t)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Lo(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){var e;try{await ia(t)}catch(t){if("auth/network-request-failed"!==(null===(e=t)||void 0===e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?C(t):null;return e&&Lo(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Lo(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Fo(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new v("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Fo(t)||this._popupRedirectResolver;Lo(e,this,"argument-error"),this.redirectPersistenceManager=await la.create(this,[Fo(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"==typeof e?e:e.next.bind(e),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Lo(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"==typeof e?t.addObserver(e,n,i):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Lo(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=ya(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());return n&&(e["X-Firebase-Client"]=n),e}}function Ia(t){return C(t)}class _a{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new E(t,void 0);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return Lo(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class Ta{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Mo("not implemented")}_getIdTokenResponse(t){return Mo("not implemented")}_linkToIdToken(t,e){return Mo("not implemented")}_getReauthenticationResolver(t){return Mo("not implemented")}}class Ea extends Ta{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Ea(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new Ea(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return async function(t,e){return Go(t,"POST","/v1/accounts:signInWithPassword",$o(t,e))}(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return Go(t,"POST","/v1/accounts:signInWithEmailLink",$o(t,e))}(t,{email:this._email,oobCode:this._password});default:No(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return async function(t,e){return qo(t,"POST","/v1/accounts:update",e)}(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return Go(t,"POST","/v1/accounts:signInWithEmailLink",$o(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:No(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Sa(t,e){return Go(t,"POST","/v1/accounts:signInWithIdp",$o(t,e))}class ka extends Ta{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new ka(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):No("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=ko(e,["providerId","signInMethod"]);if(!n||!i)return null;const s=new ka(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(t){return Sa(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Sa(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Sa(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=I(e)}return t}}const Ca={USER_NOT_FOUND:"user-not-found"};class Aa extends Ta{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new Aa({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new Aa({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return Go(t,"POST","/v1/accounts:signInWithPhoneNumber",$o(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await Go(t,"POST","/v1/accounts:signInWithPhoneNumber",$o(t,e));if(n.temporaryProof)throw Xo(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return Go(t,"POST","/v1/accounts:signInWithPhoneNumber",$o(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Ca)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new Aa({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Oa{constructor(t){var e,n,i,r,s,o;const a=_(T(t)),h=null!==(e=a.apiKey)&&void 0!==e?e:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);Lo(h&&c&&l,"argument-error"),this.apiKey=h,this.operation=l,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=_(T(t)).link,n=e?_(T(e)).deep_link_id:null,i=_(T(t)).deep_link_id;return(i?_(T(i)).link:null)||i||n||e||t}(t);try{return new Oa(e)}catch(t){return null}}}class Ra{constructor(){this.providerId=Ra.PROVIDER_ID}static credential(t,e){return Ea._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=Oa.parseLink(e);return Lo(n,"argument-error"),Ea._fromEmailAndCode(t,n.code,n.tenantId)}}Ra.PROVIDER_ID="password",Ra.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ra.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Na extends class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Pa extends Na{constructor(){super("facebook.com")}static credential(t){return ka._fromParams({providerId:Pa.PROVIDER_ID,signInMethod:Pa.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Pa.credentialFromTaggedObject(t)}static credentialFromError(t){return Pa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Pa.credential(t.oauthAccessToken)}catch(t){return null}}}Pa.FACEBOOK_SIGN_IN_METHOD="facebook.com",Pa.PROVIDER_ID="facebook.com";class Da extends Na{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return ka._fromParams({providerId:Da.PROVIDER_ID,signInMethod:Da.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Da.credentialFromTaggedObject(t)}static credentialFromError(t){return Da.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return Da.credential(e,n)}catch(t){return null}}}Da.GOOGLE_SIGN_IN_METHOD="google.com",Da.PROVIDER_ID="google.com";class La extends Na{constructor(){super("github.com")}static credential(t){return ka._fromParams({providerId:La.PROVIDER_ID,signInMethod:La.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return La.credentialFromTaggedObject(t)}static credentialFromError(t){return La.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return La.credential(t.oauthAccessToken)}catch(t){return null}}}La.GITHUB_SIGN_IN_METHOD="github.com",La.PROVIDER_ID="github.com";class Ma extends Na{constructor(){super("twitter.com")}static credential(t,e){return ka._fromParams({providerId:Ma.PROVIDER_ID,signInMethod:Ma.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Ma.credentialFromTaggedObject(t)}static credentialFromError(t){return Ma.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return Ma.credential(e,n)}catch(t){return null}}}Ma.TWITTER_SIGN_IN_METHOD="twitter.com",Ma.PROVIDER_ID="twitter.com";class xa{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const r=await oa._fromIdTokenResponse(t,n,i),s=Ua(n);return new xa({user:r,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=Ua(n);return new xa({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function Ua(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Fa extends m{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Fa.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new Fa(t,e,n,i)}}function ja(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Fa._fromErrorAndOperation(t,n,e,i);throw n}))}new WeakMap;const Ba="__sak";class Ha{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Ba,"1"),this.storage.removeItem(Ba),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}(class extends Ha{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=d();return da(t)||va(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=function(t=d()){return va(t)||pa(t)||ma(t)||ga(t)||/windows phone/i.test(t)||fa(t)}(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);!function(){const t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||10!==document.documentMode||r===t.newValue||t.newValue===t.oldValue?i():setTimeout(i,10)}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}).type="LOCAL";(class extends Ha{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}).type="SESSION";class Va{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new Va(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async t=>t(e.origin,r))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function za(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}Va.receivers=[];Math.floor(1e6*Math.random()),new Bo(3e4,6e4);class $a{constructor(t){this.providerId=$a.PROVIDER_ID,this.auth=Ia(t)}verifyPhoneNumber(t,e){return async function(t,e,n){var i;const r=await n.verify();try{let s;if(Lo("string"==typeof r,t,"argument-error"),Lo("recaptcha"===n.type,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){Lo("enroll"===e.type,t,"internal-error");const n=await function(t,e){return qo(t,"POST","/v2/accounts/mfaEnrollment:start",$o(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{Lo("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;Lo(n,t,"missing-multi-factor-info");const o=await function(t,e){return qo(t,"POST","/v2/accounts/mfaSignIn:start",$o(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return qo(t,"POST","/v1/accounts:sendVerificationCode",$o(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}(this.auth,t,C(e))}static credential(t,e){return Aa._fromVerification(t,e)}static credentialFromResult(t){const e=t;return $a.credentialFromTaggedObject(e)}static credentialFromError(t){return $a.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?Aa._fromTokenResponse(e,n):null}}$a.PROVIDER_ID="phone",$a.PHONE_SIGN_IN_METHOD="phone";class qa extends Ta{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Sa(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Sa(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Sa(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Ka(t){return async function(t,e,n=!1){const i="signIn",r=await ja(t,i,e),s=await xa._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}(t.auth,new qa(t),t.bypassAuthState)}function Ga(t){const{auth:e,user:n}=t;return Lo(n,e,"internal-error"),async function(t,e,n=!1){var i;const{auth:r}=t,s="reauthenticate";try{const i=await ta(t,ja(r,s,e,t),n);Lo(i.idToken,r,"internal-error");const o=Zo(i.idToken);Lo(o,r,"internal-error");const{sub:a}=o;return Lo(t.uid===a,r,"user-mismatch"),xa._forOperation(t,s,i)}catch(t){throw"auth/user-not-found"===(null===(i=t)||void 0===i?void 0:i.code)&&No(r,"user-mismatch"),t}}(n,new qa(t),t.bypassAuthState)}async function Wa(t){const{auth:e,user:n}=t;return Lo(n,e,"internal-error"),async function(t,e,n=!1){const i=await ta(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return xa._forOperation(t,"link",i)}(n,new qa(t),t.bypassAuthState)}const Ja=new Bo(2e3,1e4);class Xa extends class{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Ka;case"linkViaPopup":case"linkViaRedirect":return Wa;case"reauthViaPopup":case"reauthViaRedirect":return Ga;default:No(this.auth,"internal-error")}}resolve(t){xo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){xo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Xa.currentPopupAction&&Xa.currentPopupAction.cancel(),Xa.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Lo(t,this.auth,"internal-error"),t}async onExecution(){xo(1===this.filter.length,"Popup operations only handle one event");const t=za();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(Po(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Po(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xa.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Po(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(t,Ja.get())};t()}}Xa.currentPopupAction=null,new Map,new Bo(3e4,6e4),new Bo(5e3,15e3),new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);var Ya,Qa="@firebase/auth",Za="0.20.5";class th{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{var n;t((null===(n=e)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Lo(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}Ya="Browser",ut(new A("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),{apiKey:r,authDomain:s}=n.options;return((t,n)=>{Lo(r&&!r.includes(":"),"invalid-api-key",{appName:t.name}),Lo(!(null==s?void 0:s.includes(":")),"argument-error",{appName:t.name});const i={apiKey:r,authDomain:s,clientPlatform:Ya,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ya(Ya)},o=new ba(t,n,i);return function(t,e){const n=(null==e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Fo);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(o,e),o})(n,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),ut(new A("auth-internal",(t=>{return e=Ia(t.getProvider("auth").getImmediate()),new th(e);var e}),"PRIVATE").setInstantiationMode("EXPLICIT")),gt(Qa,Za,void 0),gt(Qa,Za,"esm2017");JSON.parse('[{"q":"平和主義の第三原則とは、戦力の不保持、戦争の放棄、___の容認の3つである","a":"交戦権","attr":["L","J"]},{"q":"戦略の不保持や戦争の放棄は、憲法第___条に定められている","a":"9","attr":["L","N"]},{"q":"天皇は日本国と日本国民統合の___であり、形式的な国事行為を行う","a":"象徴","attr":["L","J"]},{"q":"天皇が国事行為を行う際には、___の助言と承認が必要である。","a":"内閣","attr":["L","J"]},{"q":"天皇が行う主な国事行為には、国会の召集、衆議院の解散、___の任命がある。","a":"内閣総理大臣","attr":["L","J"]},{"q":"憲法で保障される５つの基本的人権とは、自由権、社会権、平等権、請求権、___権である。","a":"参政","attr":["L","J"]},{"q":"憲法改正を承認するかどうかは、有権者による___で決められる。","a":"国民投票","attr":["L","J"]},{"q":"国民が「健康で文化的な最低限度の生活を営む権利」を___権という。","a":"生存","attr":["L","J"]},{"q":"思想および___の自由は、これを侵してはならないと規定されている","a":"良心","attr":["L","J"]},{"q":"政治と宗教は分けて考えるべきとする憲法上の原則を___の原則という","a":"政教分離","attr":["L","J"]},{"q":"集会・結社・言論・出版などの表現の自由を侵す行為として、___が禁止されている。","a":"検閲","attr":["L","J"]},{"q":"第２２条より、___に反しない限り、居住・移転の自由、職業選択の自由が認められている。","a":"公共の福祉","attr":["L","J"]},{"q":"新たに認められた人権の一つで、私事をみだりに公開されない権利を___権という。","a":"プライバシー","attr":["L","J"]},{"q":"労働者に保障されている３つの権利とは、団結権、___権、団体行動権である。","a":"団体交渉","attr":["L","J"]},{"q":"憲法改正の原案を討議るるため、衆参両院内に設けられた機関が___である。","a":"憲法審査会","attr":["L","J"]},{"q":"憲法改正の発議には、衆参両院それぞれの総議員の___以上の賛成が必要である。","a":"３分の２","attr":["L","N"]},{"q":"２０１８年施行された国民投票法により、投票権は___歳以上となった。","a":"18","attr":["L","N"]},{"q":"さんけ","a":"","attr":["",""]},{"q":"","a":"","attr":["",""]},{"q":"","a":"","attr":["",""]},{"q":"","a":"","attr":["",""]},{"q":"","a":"","attr":["",""]},{"q":"","a":"","attr":["",""]},{"q":"","a":"","attr":["",""]},{"q":"","a":"","attr":["",""]},{"q":"","a":"","attr":["",""]},{"q":"","a":"","attr":["",""]},{"q":"","a":"","attr":["",""]}]').length;const eh=document.getElementById("embeddingContainer"),nh=["start","set","solve","result"];Object.freeze(nh),fetch("/src/view/page/answer/answer.html").then((t=>t.text())).then((t=>e.updateContext("ansPartText",(new DOMParser).parseFromString(t,"text/html").getElementsByTagName("html")[0])));const ih=new o(nh,eh);ih.loadNextPageWithPath(),e.updateContext("mainPage",ih)})();